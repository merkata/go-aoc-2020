package day3_test

import (
	"testing"

	"github.com/merkata/go-aoc-2020/day3"
)

type test struct {
	description string
	input       []string
	slopes      []day3.Slope
	want        int
}

func TestSlopeTrees(t *testing.T) {
	tests := []test{
		{description: "part 1 solution",
			input: []string{
				"........#.............#........",
				"...#....#...#....#.............",
				".#..#...#............#.....#..#",
				"..#......#..##............###..",
				"..........#......#..#..#.......",
				".#..#.......#.........#.#......",
				".........#..#....##..#.##....#.",
				"..#....##...#..................",
				"##..........#.##...#....##..#..",
				"...#....#...#..............#...",
				"...........................#..#",
				"..##.##.#..................#...",
				"...#.##..#............#........",
				"........#.......#...#.....##.#.",
				".##..........#......#.......#..",
				"...#..........#...#..#.......#.",
				"......#...#...#.##.......#.#...",
				"........#...#...#...##.........",
				"#..............#.#....#.......#",
				"..#..#..#.#....#...............",
				".....#........#...#..........#.",
				"##......#...#..#.##.......#....",
				"..#.#.....#.#.............#.#.#",
				"#..#..##......##...#...........",
				"..#......#........#.....#......",
				".....#.......#....#.#...#......",
				"...#........#...........#...#..",
				".......#.#...........###....#..",
				"...#...........##....##........",
				"#....#..####....#.....#..#....#",
				"..........#...........#........",
				"...#.......#....#.#.........#..",
				"....#...#.......#..###.........",
				"......#......#..#......#..#....",
				"...#.....#............#..#.....",
				"...#.#.#.#..#.......#.....#....",
				"#....##...#.........#...##.....",
				"#..#.......#..#..#..#...##.....",
				"#.......#............#.....#...",
				".#........##....##...#........#",
				".....#...#.....................",
				".......#........#..............",
				".....#............#.#.#...#.#..",
				".....##..#.............#.......",
				"..#.##..#........#..#...#......",
				".........#.#....#...........#..",
				".#.....#..#....#.....#...#.....",
				"....#.#................#.......",
				"...............##......#...#...",
				".##...#...#.......##.#....#....",
				"............#........#.......#.",
				"......##.#.#...................",
				".#.#..............#.......#....",
				"#.....#...#.......#..#...#.....",
				".............#....#..#......#..",
				"........#...##................#",
				".......#...#..#..##............",
				"..#..#...##...#..#.#.....#...#.",
				".#.#...#.........#.#...........",
				"...###....#.......#...#........",
				"........#......##.#...#..##..#.",
				".....................#.#.......",
				".............#...........#...#.",
				"#..#..#.....#.#...#............",
				"...#....#.....#...........#....",
				"..##.....##...#......#..##.....",
				"#.....#.....###.#.....#....##..",
				".#...........###...............",
				"..................#..##.#...#..",
				"................#....##.#......",
				".#.#.#...#....#.........#..#.#.",
				"#.......#........##............",
				".......##.#....#.#............#",
				"..........#..##.#....#.........",
				"........##..#....#.............",
				".........#....#...........##...",
				"#.........#.#..#..#..........#.",
				".....#........#......#.........",
				"....#.#.#...............#......",
				".#..#..##...#.##..........#....",
				"..#....................#.#.....",
				".........#....#...........#.#.#",
				"........#....##.##.............",
				"..#.....#.......#..#......#....",
				"#..........#.#.....#.#....#....",
				"........##.#.....#..#.....#.#..",
				"...................#...#....#.#",
				"............#..#....#...#...#..",
				"..............#.#.........#....",
				"...#..#..#.#..##..##...........",
				".#...........................#.",
				".#.......#...........#....#.#.#",
				"......#..#...#........#...##...",
				".........#......#.#.......#...#",
				"...#..##................#......",
				".............#.#..##....#.#....",
				"...............#..#......#.....",
				".#......#.#.#....#........#....",
				"........#..#.##..#..#.........#",
				"...#....#.#...#..#.......#..#..",
				"..#...##.........#..#...#......",
				"...#...........#.............#.",
				"....#.....................#....",
				".....#..#...............#.#...#",
				"....#..........#........#......",
				"..#....#........##..##.........",
				"...#....#..#.#.......#...#.....",
				"..#........#....#...##....#.#..",
				".#...#........##.....#....###..",
				"#....#....##......#........#...",
				".........#..#.#..........#....#",
				"....#...#.....#.......##.......",
				"..............#..........#.##..",
				"#...#..#..............#......#.",
				".................#......##....#",
				"..#..##..#.......#..#.#......#.",
				".............#........#.....#.#",
				".#.##............#..#..........",
				"..#...#...........#..##........",
				".#....#...#....#.......#.......",
				"...#.#..#..#..#....#.....#..#..",
				"....#..##..............#...#...",
				"#..........###......###........",
				".##.##......#..#............#..",
				".#...........#.#.....#...#.....",
				"#.#..#...#............#........",
				".........#...#...#..........##.",
				".......###..#..........#.......",
				"...........###.....#........#..",
				".#.............#.....#......#..",
				"...#.....#....#.#.........##...",
				"....##..##...#.......##........",
				"......#....##.........#......#.",
				"..........#.....##..#.....#..#.",
				"..........####...#..#.........#",
				".##....#..#.#...#.......#......",
				"...#.#.##.#.#...#....#.#.#.....",
				".........#...##........##.....#",
				"..#........#..........##...##.#",
				"##...##..........#.#...........",
				"..............#......#.........",
				"........#.....#.#.......#......",
				".#...#.....#....#.#..#.........",
				".....#....................##...",
				"....#..................#.#...##",
				".....#............#..##........",
				"#..........#....#.#.......##.#.",
				"....#..#.....................#.",
				"#..#....##.....#...............",
				"..#...#..#..##....#.#..........",
				".......#......#.#.......#.....#",
				"...#.#.......#...#.##..........",
				"....#..........#....#.#.#......",
				".......#..#..........#..##.....",
				"#......#......#...#......#...#.",
				"###..#....##......##........#..",
				".#..........#.....#.......#.#..",
				".......#.....#.....#.#.........",
				"..#...#....#...................",
				"..............#.##.............",
				".#...#.......#.##...#.#.......#",
				".......#......................#",
				"....#.#...#.#........#.........",
				".#......#....#...#.............",
				"#.......#...###.....#.#.#..#...",
				"#....##.#...............##.....",
				"..#.......#..................#.",
				".....####...............#......",
				".##......#......#.#.......##.#.",
				"#......##..###....#....#......#",
				".##.......##.##...#.##.........",
				"......##............#.......#..",
				"......#..#.....##.#............",
				".#..........#.....##...........",
				"#.........#......#......##.#...",
				".........#.......#..#......#.#.",
				".........#.......#...........#.",
				".#..##.#..................##...",
				".............#.............#...",
				".....##........#......##...##..",
				"..#..#.#.....#..#....#.........",
				".....#....#.....#.....#........",
				"#......##.....#....#....#......",
				"#.................#..#.#......#",
				".......#..#......#....#.#...#.#",
				"....#.........#..#..........#.#",
				"##......#............#...#...#.",
				"....##......#...#.....#....##..",
				".#...##.........#..............",
				"......#.....................#..",
				"..#..........###....#..........",
				"#....#...#..#.............#....",
				"#........#.#......#....#.......",
				".#...#.......#..#...#.#...#..#.",
				"................##.#.....#.....",
				"###.......#...#................",
				"...#.......#...#.#.....#.......",
				"..#.........#.....#.#.......#..",
				"......#.......................#",
				"#.....#.#..#....#.......#......",
				"...#....#..#....####...........",
				".............#.....#...##......",
				".......#.........#...#..#......",
				".##..#.........#....#.#........",
				"....##...#.#...........#....#..",
				".........................##....",
				"..###.......##....#.#.........#",
				".#....#.#.#...........##....#..",
				"......#...#..#..#..#..#.......#",
				"..#....#.#.......#..#..#..#...#",
				".....##...#.##....#.#...#......",
				".........#..#....#..#..........",
				".##..##.........#.#.....#......",
				"..........#...##...#.#...#.....",
				"#.##..#..#.............#.......",
				"...#...........#.......#......#",
				".......#....#....#...##.......#",
				"..#.##........###..#......#....",
				"...#...........###......#..#..#",
				".#.........#.#.........#.#.....",
				"##.......##.##.##......##......",
				"............#...#..........#...",
				"....................#..........",
				"...#..#...........#...#...#....",
				".................#...#......###",
				"...#................#.#.##.....",
				"...............#........#......",
				"#.............##......#.#..#...",
				"..#.#.....#..#.##.....##...#...",
				"......#.........#......#.......",
				"#.......#......#....#........#.",
				".#..##.....#.........#.........",
				"....##.##.#...#.........##.#...",
				"...............#..#..#..##.....",
				".#..#...............###........",
				".##............##..............",
				"...............#...##...#...#.#",
				"..#.#......#.#..#.............#",
				"#.#..#..##.........#.#.#...#...",
				"....##.#....................##.",
				".........#..#.....#.....#..#..#",
				"....#......#......#.##....#....",
				"........###..#.............#..#",
				"##................#.........#..",
				"#.....#.......#....#...........",
				"..#.......#..#........#....#...",
				"..#.#.##..#.#...##........#.##.",
				"..#..........#............#....",
				"..........#...............##...",
				"..........###........#.#.......",
				".....###..#.............#......",
				"##.............#...#.....#.....",
				".....#......#....#........#.#..",
				"............#..#..............#",
				".................#...........##",
				"#........#.........###.....#...",
				"..#.#..............##......#.#.",
				".#...........#.........#..##..#",
				"...............................",
				".#.....#..#....#....#......#...",
				".#...#......#.#..#....#.......#",
				"......#.##.......#......#......",
				"......#..###..#................",
				"#..#.....#........##...#.......",
				"......##.........##....#...##..",
				".#..........#.................#",
				"#..#.......#...............#...",
				".........#..###....#.#.##.#....",
				"..#...#.##..##...............##",
				".........#.....................",
				".#....##...#......#....#.......",
				"............#..........#..#....",
				"...#......##....#....#........#",
				".#...................#.........",
				"#.#........###....#..........#.",
				".........#....#....#........##.",
				".#....#..#.........#..#........",
				"...............#..#...#..#...##",
				".........#....##....#......#...",
				".#.............................",
				"...#........#...#.#...#.#..#...",
				".....#..##...#.#...............",
				"#.....#....#.........#.........",
				"#...#...........##.........#...",
				"..##........#.#...#...#......#.",
				"...........#.....#...#.#.......",
				"......###....#.....#...........",
				"......##...#..........#....#.#.",
				".......##..##..........#.......",
				"....#............#..#....##....",
				"..##...................#.#.....",
				"...#.#..#.#....................",
				".#..##..#............##.###..#.",
				"#.#...#....#.#..........#.#....",
				"........#....#.....#...........",
				"..##....#...#.......#..........",
				"...........##.##....#..........",
				".....#............#............",
				".......#.............#....#....",
				".................#......#......",
				"......##.......#....#..##...#..",
				".#..#....#.....................",
				"...#.#.#...#......##...........",
				"##........##.#....#....#.......",
				".......#.....#..#..#...#.##....",
				"#..........#....#.#..#..#..#...",
				"...##..............#...........",
				".........#.....#.#....#.......#",
				".........#....##..#..##..#.....",
				".....#......................#..",
				"...###...#..#......#...........",
				"....#.....................#....",
				"...............................",
				"..#.....###.......#..#....#....",
				"#..........#.................#.",
				"......#.......###.......#..##..",
				".............#.##..............",
				"......#..#.#..#...........#....",
				"...#....##.#...#..#.#...#....#.",
				"..................#...#....#.##",
				"......#.#....#.................",
				"......#.#.....#.....#..##......",
				"#..##...........#..#.....#.##..",
			},
			slopes: []day3.Slope{{Right: 3, Down: 1}},
			want:   148},
		{description: "part 1 validation",
			input: []string{
				"..##.......",
				"#...#...#..",
				".#....#..#.",
				"..#.#...#.#",
				".#...##..#.",
				"..#.##.....",
				".#.#.#....#",
				".#........#",
				"#.##...#...",
				"#...##....#",
				".#..#...#.#",
			},
			slopes: []day3.Slope{{Right: 3, Down: 1}},
			want:   7},
		{description: "part 2 solution",
			input: []string{
				"........#.............#........",
				"...#....#...#....#.............",
				".#..#...#............#.....#..#",
				"..#......#..##............###..",
				"..........#......#..#..#.......",
				".#..#.......#.........#.#......",
				".........#..#....##..#.##....#.",
				"..#....##...#..................",
				"##..........#.##...#....##..#..",
				"...#....#...#..............#...",
				"...........................#..#",
				"..##.##.#..................#...",
				"...#.##..#............#........",
				"........#.......#...#.....##.#.",
				".##..........#......#.......#..",
				"...#..........#...#..#.......#.",
				"......#...#...#.##.......#.#...",
				"........#...#...#...##.........",
				"#..............#.#....#.......#",
				"..#..#..#.#....#...............",
				".....#........#...#..........#.",
				"##......#...#..#.##.......#....",
				"..#.#.....#.#.............#.#.#",
				"#..#..##......##...#...........",
				"..#......#........#.....#......",
				".....#.......#....#.#...#......",
				"...#........#...........#...#..",
				".......#.#...........###....#..",
				"...#...........##....##........",
				"#....#..####....#.....#..#....#",
				"..........#...........#........",
				"...#.......#....#.#.........#..",
				"....#...#.......#..###.........",
				"......#......#..#......#..#....",
				"...#.....#............#..#.....",
				"...#.#.#.#..#.......#.....#....",
				"#....##...#.........#...##.....",
				"#..#.......#..#..#..#...##.....",
				"#.......#............#.....#...",
				".#........##....##...#........#",
				".....#...#.....................",
				".......#........#..............",
				".....#............#.#.#...#.#..",
				".....##..#.............#.......",
				"..#.##..#........#..#...#......",
				".........#.#....#...........#..",
				".#.....#..#....#.....#...#.....",
				"....#.#................#.......",
				"...............##......#...#...",
				".##...#...#.......##.#....#....",
				"............#........#.......#.",
				"......##.#.#...................",
				".#.#..............#.......#....",
				"#.....#...#.......#..#...#.....",
				".............#....#..#......#..",
				"........#...##................#",
				".......#...#..#..##............",
				"..#..#...##...#..#.#.....#...#.",
				".#.#...#.........#.#...........",
				"...###....#.......#...#........",
				"........#......##.#...#..##..#.",
				".....................#.#.......",
				".............#...........#...#.",
				"#..#..#.....#.#...#............",
				"...#....#.....#...........#....",
				"..##.....##...#......#..##.....",
				"#.....#.....###.#.....#....##..",
				".#...........###...............",
				"..................#..##.#...#..",
				"................#....##.#......",
				".#.#.#...#....#.........#..#.#.",
				"#.......#........##............",
				".......##.#....#.#............#",
				"..........#..##.#....#.........",
				"........##..#....#.............",
				".........#....#...........##...",
				"#.........#.#..#..#..........#.",
				".....#........#......#.........",
				"....#.#.#...............#......",
				".#..#..##...#.##..........#....",
				"..#....................#.#.....",
				".........#....#...........#.#.#",
				"........#....##.##.............",
				"..#.....#.......#..#......#....",
				"#..........#.#.....#.#....#....",
				"........##.#.....#..#.....#.#..",
				"...................#...#....#.#",
				"............#..#....#...#...#..",
				"..............#.#.........#....",
				"...#..#..#.#..##..##...........",
				".#...........................#.",
				".#.......#...........#....#.#.#",
				"......#..#...#........#...##...",
				".........#......#.#.......#...#",
				"...#..##................#......",
				".............#.#..##....#.#....",
				"...............#..#......#.....",
				".#......#.#.#....#........#....",
				"........#..#.##..#..#.........#",
				"...#....#.#...#..#.......#..#..",
				"..#...##.........#..#...#......",
				"...#...........#.............#.",
				"....#.....................#....",
				".....#..#...............#.#...#",
				"....#..........#........#......",
				"..#....#........##..##.........",
				"...#....#..#.#.......#...#.....",
				"..#........#....#...##....#.#..",
				".#...#........##.....#....###..",
				"#....#....##......#........#...",
				".........#..#.#..........#....#",
				"....#...#.....#.......##.......",
				"..............#..........#.##..",
				"#...#..#..............#......#.",
				".................#......##....#",
				"..#..##..#.......#..#.#......#.",
				".............#........#.....#.#",
				".#.##............#..#..........",
				"..#...#...........#..##........",
				".#....#...#....#.......#.......",
				"...#.#..#..#..#....#.....#..#..",
				"....#..##..............#...#...",
				"#..........###......###........",
				".##.##......#..#............#..",
				".#...........#.#.....#...#.....",
				"#.#..#...#............#........",
				".........#...#...#..........##.",
				".......###..#..........#.......",
				"...........###.....#........#..",
				".#.............#.....#......#..",
				"...#.....#....#.#.........##...",
				"....##..##...#.......##........",
				"......#....##.........#......#.",
				"..........#.....##..#.....#..#.",
				"..........####...#..#.........#",
				".##....#..#.#...#.......#......",
				"...#.#.##.#.#...#....#.#.#.....",
				".........#...##........##.....#",
				"..#........#..........##...##.#",
				"##...##..........#.#...........",
				"..............#......#.........",
				"........#.....#.#.......#......",
				".#...#.....#....#.#..#.........",
				".....#....................##...",
				"....#..................#.#...##",
				".....#............#..##........",
				"#..........#....#.#.......##.#.",
				"....#..#.....................#.",
				"#..#....##.....#...............",
				"..#...#..#..##....#.#..........",
				".......#......#.#.......#.....#",
				"...#.#.......#...#.##..........",
				"....#..........#....#.#.#......",
				".......#..#..........#..##.....",
				"#......#......#...#......#...#.",
				"###..#....##......##........#..",
				".#..........#.....#.......#.#..",
				".......#.....#.....#.#.........",
				"..#...#....#...................",
				"..............#.##.............",
				".#...#.......#.##...#.#.......#",
				".......#......................#",
				"....#.#...#.#........#.........",
				".#......#....#...#.............",
				"#.......#...###.....#.#.#..#...",
				"#....##.#...............##.....",
				"..#.......#..................#.",
				".....####...............#......",
				".##......#......#.#.......##.#.",
				"#......##..###....#....#......#",
				".##.......##.##...#.##.........",
				"......##............#.......#..",
				"......#..#.....##.#............",
				".#..........#.....##...........",
				"#.........#......#......##.#...",
				".........#.......#..#......#.#.",
				".........#.......#...........#.",
				".#..##.#..................##...",
				".............#.............#...",
				".....##........#......##...##..",
				"..#..#.#.....#..#....#.........",
				".....#....#.....#.....#........",
				"#......##.....#....#....#......",
				"#.................#..#.#......#",
				".......#..#......#....#.#...#.#",
				"....#.........#..#..........#.#",
				"##......#............#...#...#.",
				"....##......#...#.....#....##..",
				".#...##.........#..............",
				"......#.....................#..",
				"..#..........###....#..........",
				"#....#...#..#.............#....",
				"#........#.#......#....#.......",
				".#...#.......#..#...#.#...#..#.",
				"................##.#.....#.....",
				"###.......#...#................",
				"...#.......#...#.#.....#.......",
				"..#.........#.....#.#.......#..",
				"......#.......................#",
				"#.....#.#..#....#.......#......",
				"...#....#..#....####...........",
				".............#.....#...##......",
				".......#.........#...#..#......",
				".##..#.........#....#.#........",
				"....##...#.#...........#....#..",
				".........................##....",
				"..###.......##....#.#.........#",
				".#....#.#.#...........##....#..",
				"......#...#..#..#..#..#.......#",
				"..#....#.#.......#..#..#..#...#",
				".....##...#.##....#.#...#......",
				".........#..#....#..#..........",
				".##..##.........#.#.....#......",
				"..........#...##...#.#...#.....",
				"#.##..#..#.............#.......",
				"...#...........#.......#......#",
				".......#....#....#...##.......#",
				"..#.##........###..#......#....",
				"...#...........###......#..#..#",
				".#.........#.#.........#.#.....",
				"##.......##.##.##......##......",
				"............#...#..........#...",
				"....................#..........",
				"...#..#...........#...#...#....",
				".................#...#......###",
				"...#................#.#.##.....",
				"...............#........#......",
				"#.............##......#.#..#...",
				"..#.#.....#..#.##.....##...#...",
				"......#.........#......#.......",
				"#.......#......#....#........#.",
				".#..##.....#.........#.........",
				"....##.##.#...#.........##.#...",
				"...............#..#..#..##.....",
				".#..#...............###........",
				".##............##..............",
				"...............#...##...#...#.#",
				"..#.#......#.#..#.............#",
				"#.#..#..##.........#.#.#...#...",
				"....##.#....................##.",
				".........#..#.....#.....#..#..#",
				"....#......#......#.##....#....",
				"........###..#.............#..#",
				"##................#.........#..",
				"#.....#.......#....#...........",
				"..#.......#..#........#....#...",
				"..#.#.##..#.#...##........#.##.",
				"..#..........#............#....",
				"..........#...............##...",
				"..........###........#.#.......",
				".....###..#.............#......",
				"##.............#...#.....#.....",
				".....#......#....#........#.#..",
				"............#..#..............#",
				".................#...........##",
				"#........#.........###.....#...",
				"..#.#..............##......#.#.",
				".#...........#.........#..##..#",
				"...............................",
				".#.....#..#....#....#......#...",
				".#...#......#.#..#....#.......#",
				"......#.##.......#......#......",
				"......#..###..#................",
				"#..#.....#........##...#.......",
				"......##.........##....#...##..",
				".#..........#.................#",
				"#..#.......#...............#...",
				".........#..###....#.#.##.#....",
				"..#...#.##..##...............##",
				".........#.....................",
				".#....##...#......#....#.......",
				"............#..........#..#....",
				"...#......##....#....#........#",
				".#...................#.........",
				"#.#........###....#..........#.",
				".........#....#....#........##.",
				".#....#..#.........#..#........",
				"...............#..#...#..#...##",
				".........#....##....#......#...",
				".#.............................",
				"...#........#...#.#...#.#..#...",
				".....#..##...#.#...............",
				"#.....#....#.........#.........",
				"#...#...........##.........#...",
				"..##........#.#...#...#......#.",
				"...........#.....#...#.#.......",
				"......###....#.....#...........",
				"......##...#..........#....#.#.",
				".......##..##..........#.......",
				"....#............#..#....##....",
				"..##...................#.#.....",
				"...#.#..#.#....................",
				".#..##..#............##.###..#.",
				"#.#...#....#.#..........#.#....",
				"........#....#.....#...........",
				"..##....#...#.......#..........",
				"...........##.##....#..........",
				".....#............#............",
				".......#.............#....#....",
				".................#......#......",
				"......##.......#....#..##...#..",
				".#..#....#.....................",
				"...#.#.#...#......##...........",
				"##........##.#....#....#.......",
				".......#.....#..#..#...#.##....",
				"#..........#....#.#..#..#..#...",
				"...##..............#...........",
				".........#.....#.#....#.......#",
				".........#....##..#..##..#.....",
				".....#......................#..",
				"...###...#..#......#...........",
				"....#.....................#....",
				"...............................",
				"..#.....###.......#..#....#....",
				"#..........#.................#.",
				"......#.......###.......#..##..",
				".............#.##..............",
				"......#..#.#..#...........#....",
				"...#....##.#...#..#.#...#....#.",
				"..................#...#....#.##",
				"......#.#....#.................",
				"......#.#.....#.....#..##......",
				"#..##...........#..#.....#.##..",
			},
			slopes: []day3.Slope{
				{Right: 1, Down: 1},
				{Right: 3, Down: 1},
				{Right: 5, Down: 1},
				{Right: 7, Down: 1},
				{Right: 1, Down: 2},
			},
			want: 727923200,
		},
		{description: "part 2 validation",
			input: []string{
				"..##.......",
				"#...#...#..",
				".#....#..#.",
				"..#.#...#.#",
				".#...##..#.",
				"..#.##.....",
				".#.#.#....#",
				".#........#",
				"#.##...#...",
				"#...##....#",
				".#..#...#.#",
			},
			slopes: []day3.Slope{
				{Right: 1, Down: 1},
				{Right: 3, Down: 1},
				{Right: 5, Down: 1},
				{Right: 7, Down: 1},
				{Right: 1, Down: 2},
			},
			want: 336},
	}
	for _, tc := range tests {
		got := day3.SlopeTrees(tc.input, tc.slopes)
		if tc.want != got {
			t.Errorf("failed test: %s, wanted %d got %d\n", tc.description, tc.want, got)
		}
	}
}
